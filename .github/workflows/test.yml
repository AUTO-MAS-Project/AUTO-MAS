     #   AUTO-MAS: A Multi-Script, Multi-Config Management and Automation Software
#   Copyright © 2024-2025 DLmaster361
#   Copyright © 2025 AUTO-MAS Team

#   This file is part of AUTO-MAS.

#   AUTO-MAS is free software: you can redistribute it and/or modify
#   it under the terms of the GNU General Public License as published
#   by the Free Software Foundation, either version 3 of the License,
#   or (at your option) any later version.

#   AUTO-MAS is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty
#   of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See
#   the GNU General Public License for more details.

#   You should have received a copy of the GNU General Public License
#   along with AUTO-MAS. If not, see <https://www.gnu.org/licenses/>.

#   Contact: DLmaster_361@163.com

name: 发行版

on:
  workflow_dispatch:

permissions:
  contents: write
  actions: write

jobs:


  mirror:
    name: 推送镜像版本
    runs-on: macos-latest

    steps:
      - name: 触发自建源更新
        run: |
          PAYLOAD=$(jq -n \
            --arg version "v5.0.0-beta.4" \
            --arg res_id "AUTO_MAS" \
            --arg channel "beta" \
            --arg os "macos" \
            --arg arch "x64" \
            '{version: $version, res_id: $res_id, channel: $channel, os: $os, arch: $arch}')
          curl -X POST "${{ secrets.UPDATE_URL }}" -H "Content-Type: application/json" -d "$PAYLOAD"